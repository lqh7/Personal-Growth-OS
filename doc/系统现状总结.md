# Personal Growth OS - ç³»ç»Ÿç°çŠ¶æ€»ç»“

> **ğŸ“Œ æ–‡æ¡£ç±»å‹**: å®é™…ç³»ç»ŸçŠ¶æ€ (As-Built Documentation)
> **æœ€åæ›´æ–°**: 2025-11-24
> **é€‚ç”¨åœºæ™¯**: äº†è§£å½“å‰ç³»ç»ŸçœŸå®å®ç°,è¿›è¡Œå¼€å‘å’Œç»´æŠ¤

---

## ğŸ“Š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ç±»å‹ | æ–‡æ¡£åç§° | ç”¨é€” |
|---------|---------|------|
| **å®é™…ç°çŠ¶** | æœ¬æ–‡æ¡£ | äº†è§£å½“å‰ç³»ç»ŸçœŸå®å®ç°çŠ¶æ€ |
| è®¾è®¡æ„¿æ™¯ | AIè®¤çŸ¥åŠ©æ‰‹æ¶æ„è®¾è®¡.md | æœªæ¥ç›®æ ‡æ¶æ„(Redis+MongoDB+åŒé€šé“) |
| å®ç°ç»†èŠ‚ | åç«¯è¯¦ç»†è®¾è®¡.md | æ··åˆæè¿°(å½“å‰+ç›®æ ‡),éƒ¨åˆ†è¿‡æ—¶ |
| å®ç°ç»†èŠ‚ | å‰ç«¯è¯¦ç»†è®¾è®¡.md | å‰ç«¯ç»„ä»¶å’ŒçŠ¶æ€ç®¡ç† |
| å®ç°ç»†èŠ‚ | æ—¥ç¨‹è¡¨è¯¦ç»†è®¾è®¡.md | æ—¥ç¨‹è¡¨åŠŸèƒ½å®ç° |

---

## 1. ç³»ç»Ÿæ¦‚è§ˆ

### 1.1 æ ¸å¿ƒå®šä½

Personal Growth OS æ˜¯ä¸€ä¸ª"ç¬¬äºŒå¤§è„‘"åº”ç”¨,é€šè¿‡ä¸‰å¤§æ”¯æŸ±å¸®åŠ©ç”¨æˆ·å®ç°ä¸ªäººæˆé•¿:

1. **å¯¹æŠ—æ‹–å»¶** - ä»»åŠ¡åˆ†è§£é™ä½å¯åŠ¨æ‘©æ“¦
2. **å›ºåŒ–çŸ¥è¯†** - ç¬”è®°ç³»ç»Ÿ+RAGæ™ºèƒ½æ£€ç´¢
3. **é©±åŠ¨å¤ç›˜** - æ•°æ®é©±åŠ¨çš„æ´å¯Ÿ(è®¡åˆ’ä¸­)

### 1.2 å½“å‰çŠ¶æ€

**MVPé˜¶æ®µ** - æ ¸å¿ƒåŠŸèƒ½å·²å®ç°,ç”¨æˆ·å¯æ—¥å¸¸ä½¿ç”¨

- âœ… å®Œæ•´çš„ä»»åŠ¡ç®¡ç†(CRUD+æ—¥ç¨‹è¡¨+å»¶å)
- âœ… ç¬”è®°ç³»ç»Ÿ(Markdown+é™„ä»¶+é“¾æ¥)
- âœ… AIä»»åŠ¡åˆ†è§£(Task Igniter Agent)
- âœ… åŸºç¡€RAGè¯­ä¹‰æœç´¢
- âœ… AIå¯¹è¯åŠ©æ‰‹(é›†æˆ agent-ui)
- âœ… å‰ç«¯Chaté¢æ¿(å¯æŠ˜å +å†å²è®°å½•)
- â¸ï¸ æ•°æ®å¤ç›˜(è®¾è®¡ä¸­,æœªå®ç°)

---

## 2. æŠ€æœ¯æ ˆè¯¦æƒ…

### 2.1 åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| **Python** | 3.10+ | ç¼–ç¨‹è¯­è¨€ | å¿…éœ€ç‰ˆæœ¬ |
| **FastAPI** | 0.115+ | Webæ¡†æ¶ | å¼‚æ­¥é«˜æ€§èƒ½ |
| **Agno** | latest | AI Agentæ¡†æ¶ | âœ… **å®é™…ä½¿ç”¨** |
| **PostgreSQL** | 14+ | å…³ç³»æ•°æ®åº“ | ä»»åŠ¡/ç¬”è®°/é¡¹ç›®æ•°æ® |
| **pgvector** | 0.5+ | å‘é‡æ‰©å±• | ç¬”è®°è¯­ä¹‰æœç´¢(é›†æˆåœ¨PGå†…) |
| **SQLAlchemy** | 2.0.36 | ORM | æ•°æ®åº“è®¿é—® |
| **Pydantic** | 2.9.2 | æ•°æ®éªŒè¯ | Schemaå®šä¹‰ |

**é‡è¦è¯´æ˜**:
- âœ… **ä½¿ç”¨Agno** - æ–‡æ¡£ä¸­æåˆ°çš„LangGraphå·²è¢«Agnoæ›¿ä»£
- âœ… **ä½¿ç”¨PostgreSQL + pgvector** - ç»Ÿä¸€æ•°æ®åº“æ–¹æ¡ˆ,æ›¿ä»£SQLite + ChromaDB
- âŒ **æœªä½¿ç”¨Redis** - Working Memoryç›®å‰ç”¨PostgreSQL(MVPç®€åŒ–)
- âŒ **æœªä½¿ç”¨MongoDB** - ä¼šè¯å½’æ¡£ç›®å‰æœªå®ç°
- âŒ **æœªä½¿ç”¨Mem0** - è®°å¿†ç®¡ç†è®¡åˆ’ä¸­

### 2.2 å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| **Vue 3** | latest | å‰ç«¯æ¡†æ¶ | Composition API |
| **TypeScript** | latest | ç±»å‹ç³»ç»Ÿ | ç±»å‹å®‰å…¨ |
| **Vite** | latest | æ„å»ºå·¥å…· | å¼€å‘æœåŠ¡å™¨+HMR |
| **Pinia** | latest | çŠ¶æ€ç®¡ç† | æ›¿ä»£Vuex |
| **Element Plus** | latest | UIç»„ä»¶åº“ | ä¼ä¸šçº§UI |
| **ECharts** | latest | æ•°æ®å¯è§†åŒ– | å¤ç›˜å›¾è¡¨(è®¡åˆ’) |
| **md-editor-v3** | latest | Markdownç¼–è¾‘å™¨ | ç¬”è®°ç¼–è¾‘ |

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·ç•Œé¢å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ä»»åŠ¡çœ‹æ¿  â”‚  â”‚ æ—¥ç¨‹è¡¨   â”‚  â”‚ ç¬”è®°ç®¡ç†  â”‚  â”‚ Chat â”‚â”‚â”‚
â”‚  â”‚ TasksViewâ”‚  â”‚WeekScheduleâ”‚  â”‚NotesView â”‚  â”‚Panel â”‚â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API (Axios)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FastAPI åç«¯                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ APIå±‚ (endpoints/)                           â”‚   â”‚
â”‚  â”‚ â€¢ tasks.py    â€¢ notes.py    â€¢ chat.py       â”‚   â”‚
â”‚  â”‚ â€¢ projects.py â€¢ attachments.py â€¢ links.py   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æœåŠ¡å±‚ (services/)                           â”‚   â”‚
â”‚  â”‚ â€¢ vector_store.py (pgvectoré›†æˆ)            â”‚   â”‚
â”‚  â”‚ â€¢ file_storage.py (é™„ä»¶ç®¡ç†)                 â”‚   â”‚
â”‚  â”‚ â€¢ chunking.py (æ–‡æœ¬åˆ†å—)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Agentå±‚ (agents/)                            â”‚   â”‚
â”‚  â”‚ â€¢ task_igniter_agno.py (Agno Agent)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CRUDå±‚ (crud/)                              â”‚   â”‚
â”‚  â”‚ â€¢ crud_task.py  â€¢ crud_note.py              â”‚   â”‚
â”‚  â”‚ â€¢ crud_project.py                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     æ•°æ®æŒä¹…å±‚               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚ PostgreSQL + pgvector  â”‚ â”‚
    â”‚  â”‚                        â”‚ â”‚
    â”‚  â”‚ â€¢ tasks (å…³ç³»è¡¨)        â”‚ â”‚
    â”‚  â”‚ â€¢ notes (å…³ç³»è¡¨)        â”‚ â”‚
    â”‚  â”‚ â€¢ projects (å…³ç³»è¡¨)     â”‚ â”‚
    â”‚  â”‚ â€¢ note_embeddings      â”‚ â”‚
    â”‚  â”‚   (å‘é‡å­—æ®µ: vector)    â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ•°æ®æµè®¾è®¡

**ä»»åŠ¡åˆ›å»ºæµç¨‹**:
```
ç”¨æˆ·åˆ›å»ºä»»åŠ¡ â†’ TasksView.vue â†’ taskStore.createTask()
  â†’ API: POST /api/tasks/ â†’ crud_task.create_task()
  â†’ PostgreSQL INSERT â†’ è¿”å›ä»»åŠ¡å¯¹è±¡ â†’ æ›´æ–°å‰ç«¯çŠ¶æ€
```

**AIä»»åŠ¡åˆ†è§£æµç¨‹**:
```
ç”¨æˆ·è¾“å…¥ä»»åŠ¡æè¿° â†’ ChatPanel.vue â†’ POST /api/tasks/ignite
  â†’ task_igniter_agent (Agno) â†’ LLMåˆ†æ+å·¥å…·è°ƒç”¨
  â†’ è¿”å›åˆ†è§£ç»“æœ â†’ å‰ç«¯å±•ç¤º
```

**ç¬”è®°è¯­ä¹‰æœç´¢æµç¨‹**:
```
ç”¨æˆ·æœç´¢å…³é”®è¯ â†’ NotesView.vue â†’ GET /api/notes/search/semantic
  â†’ vector_store.search_similar_notes()
  â†’ PostgreSQL pgvectorç›¸ä¼¼åº¦æŸ¥è¯¢ (SELECT * ORDER BY embedding <=> query_vector)
  â†’ è¿”å›ç›¸å…³ç¬”è®° â†’ å‰ç«¯å±•ç¤º
```

---

## 4. æ ¸å¿ƒåŠŸèƒ½å®ç°çŠ¶æ€

### 4.1 ä»»åŠ¡ç®¡ç† âœ…

**å®ç°åŠŸèƒ½**:
- âœ… ä»»åŠ¡CRUD (åˆ›å»º/æŸ¥è¯¢/æ›´æ–°/åˆ é™¤)
- âœ… ä»»åŠ¡çŠ¶æ€æµè½¬ (pending/in_progress/completed/archived)
- âœ… ä¼˜å…ˆçº§ç®¡ç† (1-5çº§)
- âœ… æ—¶é—´ç®¡ç† (due_date, snooze_until, start_time, end_time)
- âœ… é¡¹ç›®å½’å± (project_id)
- âœ… å­ä»»åŠ¡æ”¯æŒ (parent_task_id)
- âœ… ä¼°æ—¶ç®¡ç† (estimated_hours)

**APIç«¯ç‚¹**:
```
GET    /api/tasks/              # åˆ†é¡µæŸ¥è¯¢ä»»åŠ¡
POST   /api/tasks/              # åˆ›å»ºä»»åŠ¡
GET    /api/tasks/{task_id}     # è·å–å•ä¸ªä»»åŠ¡
PUT    /api/tasks/{task_id}     # æ›´æ–°ä»»åŠ¡
DELETE /api/tasks/{task_id}     # åˆ é™¤ä»»åŠ¡
POST   /api/tasks/{task_id}/snooze  # å»¶åä»»åŠ¡
POST   /api/tasks/ignite        # AIä»»åŠ¡åˆ†è§£
```

**å‰ç«¯ç»„ä»¶**:
- `TasksView.vue` - ä»»åŠ¡ç®¡ç†ä¸»é¡µé¢
- `TaskList.vue` - ä»»åŠ¡åˆ—è¡¨
- `TaskCard.vue` - ä»»åŠ¡å¡ç‰‡
- `TaskDialog.vue` - ä»»åŠ¡ç¼–è¾‘å¯¹è¯æ¡†

### 4.2 æ—¥ç¨‹è¡¨ âœ…

**å®ç°åŠŸèƒ½**:
- âœ… å‘¨è§†å›¾ (8:00-21:00 å¯è§†åŒºåŸŸ)
- âœ… æ—¶é—´ç²¾åº¦ (1åˆ†é’Ÿ = 1åƒç´ )
- âœ… ä»»åŠ¡æ‹–æ‹½ç¼–è¾‘ (**å·²ç§»é™¤,æ”¹ç”¨å¯¹è¯æ¡†ç¼–è¾‘**)
- âœ… å…¨å¤©ä»»åŠ¡æ”¯æŒ
- âœ… ä»»åŠ¡é‡å æ£€æµ‹å’Œèšåˆ
- âœ… æœªå®‰æ’ä»»åŠ¡æµ®åŠ¨åˆ— (å¯æŠ˜å )
- âœ… ä»»åŠ¡æˆªæ–­æ•ˆæœ (è¶…å‡ºå¯è§†åŒºåŸŸ)

**å‰ç«¯ç»„ä»¶**:
- `WeekSchedule.vue` - å‘¨æ—¥ç¨‹ä¸»ç»„ä»¶
- `TaskCard.vue` - æ—¥ç¨‹ä»»åŠ¡å¡ç‰‡
- `AllDayTaskCard.vue` - å…¨å¤©ä»»åŠ¡å¡ç‰‡
- `AggregationBlock.vue` - ä»»åŠ¡èšåˆå—

**è®¾è®¡æ–‡æ¡£**: å‚è§ `doc/æ—¥ç¨‹è¡¨è¯¦ç»†è®¾è®¡.md`

### 4.3 ç¬”è®°ç³»ç»Ÿ âœ…

**å®ç°åŠŸèƒ½**:
- âœ… ç¬”è®°CRUD (åˆ›å»º/æŸ¥è¯¢/æ›´æ–°/åˆ é™¤)
- âœ… Markdownç¼–è¾‘å™¨ (md-editor-v3)
- âœ… é™„ä»¶ç®¡ç† (ä¸Šä¼ /ä¸‹è½½/åˆ é™¤)
- âœ… ç¬”è®°é“¾æ¥ (åŒå‘é“¾æ¥)
- âœ… æ ‡ç­¾ç³»ç»Ÿ (tags, many-to-many)
- âœ… è¯­ä¹‰æœç´¢ (ChromaDB RAG)
- âœ… æ¥æºè¿½æº¯ (source_url)

**APIç«¯ç‚¹**:
```
GET    /api/notes/                       # åˆ†é¡µæŸ¥è¯¢ç¬”è®°
POST   /api/notes/                       # åˆ›å»ºç¬”è®°
GET    /api/notes/{note_id}              # è·å–å•ä¸ªç¬”è®°
PUT    /api/notes/{note_id}              # æ›´æ–°ç¬”è®°
DELETE /api/notes/{note_id}              # åˆ é™¤ç¬”è®°
GET    /api/notes/search/semantic        # è¯­ä¹‰æœç´¢
POST   /api/notes/{note_id}/attachments  # ä¸Šä¼ é™„ä»¶
GET    /api/notes/links/backlinks/{note_id}  # è·å–åå‘é“¾æ¥
POST   /api/notes/links                  # åˆ›å»ºç¬”è®°é“¾æ¥
```

**å‰ç«¯ç»„ä»¶**:
- `NotesView.vue` - ç¬”è®°ç®¡ç†ä¸»é¡µé¢
- `NoteEditor.vue` - Markdownç¼–è¾‘å™¨
- `NoteCard.vue` - ç¬”è®°å¡ç‰‡

### 4.4 AIåŠ©æ‰‹ âœ…

**å®ç°åŠŸèƒ½**:
- âœ… Task Igniter Agent (ä»»åŠ¡åˆ†è§£)
- âœ… å¯¹è¯æ¥å£ (Agno Agent)
- âœ… å·¥å…·è°ƒç”¨ (search_knowledge_base, format_task_summary)
- âœ… Streamingå“åº” (SSE)
- âœ… å‰ç«¯Chaté¢æ¿ (åŸºäºagent-uiè®¾è®¡)

**Agentå®ç°**:
- `backend/app/agents/task_igniter_agno.py` - Agno Agentå®šä¹‰
- ä½¿ç”¨ Agno Agent + OpenAIæ¨¡å‹
- æ”¯æŒå‡½æ•°å·¥å…·è°ƒç”¨ (Function Tools)

**APIç«¯ç‚¹**:
```
POST /api/chat/agents/{agent_id}/runs  # è¿è¡ŒAgent (SSE Streaming)
GET  /api/chat/sessions                # è·å–ä¼šè¯åˆ—è¡¨
DELETE /api/chat/sessions/{session_id} # åˆ é™¤ä¼šè¯
```

**å‰ç«¯ç»„ä»¶** (é›†æˆè‡ªagent-ui):
- `ChatPanel.vue` - AIå¯¹è¯é¢æ¿ (å¯æŠ˜å )
- `ChatInput.vue` - è¾“å…¥æ¡† (æ”¯æŒå¤šè¡Œ)
- `Messages.vue` - æ¶ˆæ¯åˆ—è¡¨
- `MessageItem.vue` - å•æ¡æ¶ˆæ¯
- `SessionList.vue` - ä¼šè¯å†å²

**Streamingæ¶æ„**:
- SSE (Server-Sent Events) æ ¼å¼
- å¢é‡JSONè§£æ (brace counting)
- æ”¯æŒäº‹ä»¶ç±»å‹: RunStarted, RunContent, RunCompleted, ToolCallStartedç­‰

### 4.5 é¡¹ç›®ç®¡ç† âœ…

**å®ç°åŠŸèƒ½**:
- âœ… é¡¹ç›®CRUD
- âœ… é¡¹ç›®é¢œè‰²æ ‡è®°
- âœ… ç³»ç»Ÿé¡¹ç›®ä¿æŠ¤ (ID=1 "é»˜è®¤"é¡¹ç›®ä¸å¯åˆ é™¤)
- âœ… ä»»åŠ¡å½’å±é¡¹ç›®

**APIç«¯ç‚¹**:
```
GET    /api/projects/            # è·å–æ‰€æœ‰é¡¹ç›®
POST   /api/projects/            # åˆ›å»ºé¡¹ç›®
GET    /api/projects/{project_id}  # è·å–å•ä¸ªé¡¹ç›®
PUT    /api/projects/{project_id}  # æ›´æ–°é¡¹ç›®
DELETE /api/projects/{project_id}  # åˆ é™¤é¡¹ç›® (ç³»ç»Ÿé¡¹ç›®403)
```

### 4.6 é…ç½®ç®¡ç† âœ…

**å®ç°åŠŸèƒ½**:
- âœ… LLMé…ç½®ç®¡ç† (å‰ç«¯è®¾ç½®é¡µé¢)
- âœ… å¤šProvideræ”¯æŒ (OpenAI/Claude/Ollama)
- âœ… .envæ–‡ä»¶è‡ªåŠ¨æ›´æ–°
- âœ… Hot-reloadé…ç½® (æ— éœ€é‡å¯)

**é…ç½®æ–‡ä»¶**:
- `backend/.env` - å®é™…è¿è¡Œé…ç½®
- `.env.example` - é…ç½®æ¨¡æ¿

**APIç«¯ç‚¹**:
```
GET  /api/settings/   # è·å–å½“å‰é…ç½®
PUT  /api/settings/   # æ›´æ–°é…ç½®å¹¶å†™å…¥.env
```

---

## 5. æ•°æ®æ¨¡å‹

### 5.1 PostgreSQLæ•°æ®è¡¨

**tasksè¡¨**:
```sql
id: SERIAL PRIMARY KEY
title: VARCHAR(500) NOT NULL
description: TEXT
status: VARCHAR(20) DEFAULT 'pending'
priority: INTEGER CHECK (priority BETWEEN 1 AND 5)
due_date: TIMESTAMP WITH TIME ZONE
snooze_until: TIMESTAMP WITH TIME ZONE
start_time: TIMESTAMP WITH TIME ZONE
end_time: TIMESTAMP WITH TIME ZONE
estimated_hours: FLOAT
project_id: INTEGER REFERENCES projects(id)
parent_task_id: INTEGER REFERENCES tasks(id)
created_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
updated_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
```

**notesè¡¨**:
```sql
id: SERIAL PRIMARY KEY
title: VARCHAR(500) NOT NULL
content: TEXT
source_url: TEXT
project_id: INTEGER REFERENCES projects(id)
created_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
updated_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
```

**projectsè¡¨**:
```sql
id: SERIAL PRIMARY KEY
name: VARCHAR(200) NOT NULL
description: TEXT
color: VARCHAR(7)  -- #RRGGBBæ ¼å¼
is_system: BOOLEAN DEFAULT FALSE
created_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
updated_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
```

**tagsè¡¨** + **note_tagsè¡¨** (å¤šå¯¹å¤š):
```sql
tags:
  id: SERIAL PRIMARY KEY
  name: VARCHAR(100) UNIQUE NOT NULL

note_tags:
  note_id: INTEGER REFERENCES notes(id) ON DELETE CASCADE
  tag_id: INTEGER REFERENCES tags(id) ON DELETE CASCADE
  PRIMARY KEY (note_id, tag_id)
```

### 5.2 å‘é‡å­˜å‚¨ (pgvectoræ‰©å±•)

**note_embeddingsè¡¨**:
```sql
CREATE EXTENSION IF NOT EXISTS vector;

CREATE TABLE note_embeddings (
  id: SERIAL PRIMARY KEY
  note_id: INTEGER REFERENCES notes(id) ON DELETE CASCADE UNIQUE
  chunk_index: INTEGER DEFAULT 0  -- ç”¨äºå¤§æ–‡æœ¬åˆ†å—
  content: TEXT  -- å­˜å‚¨åŸå§‹æ–‡æœ¬å—
  embedding: vector(384)  -- all-MiniLM-L6-v2æ¨¡å‹ç»´åº¦
  created_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
  updated_at: TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºå‘é‡ç´¢å¼•åŠ é€Ÿç›¸ä¼¼åº¦æœç´¢
CREATE INDEX note_embeddings_embedding_idx
  ON note_embeddings
  USING ivfflat (embedding vector_cosine_ops)
  WITH (lists = 100);

-- åˆ›å»ºnote_idç´¢å¼•
CREATE INDEX note_embeddings_note_id_idx ON note_embeddings(note_id);
```

**è¯­ä¹‰æœç´¢æŸ¥è¯¢ç¤ºä¾‹**:
```sql
-- æŸ¥æ‰¾æœ€ç›¸ä¼¼çš„ç¬”è®° (ä½™å¼¦ç›¸ä¼¼åº¦)
SELECT n.id, n.title, n.content,
       1 - (ne.embedding <=> :query_vector) AS similarity
FROM notes n
JOIN note_embeddings ne ON n.id = ne.note_id
ORDER BY ne.embedding <=> :query_vector
LIMIT 5;
```

---

## 6. å‰ç«¯çŠ¶æ€ç®¡ç†

### 6.1 Pinia Stores

**taskStore** (`stores/taskStore.ts`):
- çŠ¶æ€: tasks (ä»»åŠ¡åˆ—è¡¨), loading, error
- æ“ä½œ: fetchTasks, createTask, updateTask, deleteTask, snoozeTask
- ç‰¹ç‚¹: åˆ†é¡µã€è¿‡æ»¤ã€æ’åº

**noteStore** (`stores/noteStore.ts`):
- çŠ¶æ€: notes, loading, error
- æ“ä½œ: fetchNotes, createNote, updateNote, deleteNote, semanticSearch

**projectStore** (`stores/projectStore.ts`):
- çŠ¶æ€: projects, loading, error
- æ“ä½œ: fetchProjects, createProject, updateProject, deleteProject

**chatStore** (`stores/chatStore.ts`):
- çŠ¶æ€: messages, isChatPanelVisible, sessions
- æ“ä½œ: sendMessage, toggleChatPanel, loadSessions, deleteSession

**settingsStore** (`stores/settingsStore.ts`):
- çŠ¶æ€: llmProvider, openaiApiKey, temperatureç­‰
- æ“ä½œ: loadSettings, saveSettings, resetSettings

**uiStore** (`stores/uiStore.ts`):
- çŠ¶æ€: sidebarCollapsed, sidebarWidth, chatPanelWidthPercent
- æ“ä½œ: toggleSidebar, setSidebarWidth, setChatPanelWidthPercent

### 6.2 è·¯ç”±ç»“æ„

```
/                  # é‡å®šå‘åˆ° /dashboard
/dashboard         # å·¥ä½œå° (DashboardView.vue)
/tasks             # ä»»åŠ¡ç®¡ç† (TasksView.vue)
/notes             # ç¬”è®°ç®¡ç† (NotesView.vue)
/review            # æ•°æ®å¤ç›˜ (ReviewView.vue, æœªå®ç°)
/settings          # ç³»ç»Ÿè®¾ç½® (SettingsView.vue)
```

---

## 7. æœªå®ç°åŠŸèƒ½

### 7.1 è®¡åˆ’ä¸­åŠŸèƒ½

**æ•°æ®å¤ç›˜** â¸ï¸:
- ä»»åŠ¡å®Œæˆè¶‹åŠ¿å›¾è¡¨
- æ—¶é—´æŠ•å…¥åˆ†æ
- æ‹–å»¶æ¨¡å¼è¯†åˆ«
- AIæ´å¯Ÿå»ºè®®

**é«˜çº§AIåŠŸèƒ½** â¸ï¸:
- ä¼šè¯æŒä¹…åŒ– (MongoDB)
- Working Memory (Redis)
- å­¦ä¹ é—­ç¯ (Reflection Agent)
- ä¸ªæ€§åŒ– (User Model)

**åä½œåŠŸèƒ½** â¸ï¸:
- å¤šç”¨æˆ·æ”¯æŒ
- æƒé™ç®¡ç†
- å…±äº«çŸ¥è¯†åº“

### 7.2 å·²åºŸå¼ƒè®¾è®¡

- âŒ ä»»åŠ¡æ‹–æ‹½æ—¶é—´ç¼–è¾‘ (æ”¹ç”¨å¯¹è¯æ¡†)
- âŒ LangGraphæ¡†æ¶ (å·²æ›¿æ¢ä¸ºAgno)
- âŒ Mem0è®°å¿†ç³»ç»Ÿ (æš‚æœªé›†æˆ)
- âŒ SQLite + ChromaDB (å·²è¿ç§»åˆ°PostgreSQL + pgvector)

---

## 8. å¼€å‘æŒ‡å—

### 8.1 å¯åŠ¨é¡¹ç›®

**åç«¯**:
```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
python -m uvicorn app.main:app --reload
```

**å‰ç«¯**:
```bash
cd frontend
npm install
npm run dev
```

**è®¿é—®**:
- å‰ç«¯: http://localhost:5173
- åç«¯APIæ–‡æ¡£: http://localhost:8000/docs

### 8.2 é…ç½®LLM

**æ–¹å¼1: å‰ç«¯è®¾ç½®é¡µé¢** (æ¨è):
1. è®¿é—® http://localhost:5173/settings
2. é€‰æ‹©Providerå¹¶å¡«å†™API Key
3. ç‚¹å‡»"ä¿å­˜é…ç½®"

**æ–¹å¼2: æ‰‹åŠ¨ç¼–è¾‘**:
1. å¤åˆ¶ `.env.example` åˆ° `backend/.env`
2. å¡«å†™çœŸå®API Key
3. é‡å¯åç«¯æœåŠ¡

### 8.3 æ•°æ®åº“ç®¡ç†

**PostgreSQLå®‰è£…å’Œé…ç½®**:

1. **å®‰è£…PostgreSQL 14+**:
   - Windows: ä¸‹è½½å®‰è£…åŒ… https://www.postgresql.org/download/windows/
   - Mac: `brew install postgresql@14`
   - Linux: `sudo apt install postgresql-14`

2. **å¯åŠ¨PostgreSQLæœåŠ¡**:
   ```bash
   # Windows (ä½œä¸ºæœåŠ¡è‡ªåŠ¨å¯åŠ¨)
   # Mac
   brew services start postgresql@14
   # Linux
   sudo systemctl start postgresql
   ```

3. **åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·**:
   ```bash
   # ç™»å½•PostgreSQL
   psql -U postgres

   # åˆ›å»ºæ•°æ®åº“
   CREATE DATABASE personal_growth_os;

   # åˆ›å»ºç”¨æˆ·
   CREATE USER pgos_user WITH PASSWORD 'your_password_here';

   # æˆæƒ
   GRANT ALL PRIVILEGES ON DATABASE personal_growth_os TO pgos_user;

   # é€€å‡º
   \q
   ```

4. **å®‰è£…pgvectoræ‰©å±•**:
   ```bash
   # ç™»å½•åˆ°ç›®æ ‡æ•°æ®åº“
   psql -U pgos_user -d personal_growth_os

   # åˆ›å»ºæ‰©å±•
   CREATE EXTENSION IF NOT EXISTS vector;

   # éªŒè¯å®‰è£…
   \dx
   ```

5. **é…ç½®ç¯å¢ƒå˜é‡** (`backend/.env`):
   ```bash
   DATABASE_URL=postgresql://pgos_user:your_password_here@localhost:5432/personal_growth_os
   ```

**æ•°æ®åº“è¿ç§»**:
```bash
cd backend

# è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰è¡¨ (é¦–æ¬¡è¿è¡Œåç«¯æ—¶è‡ªåŠ¨æ‰§è¡Œ)
python -m uvicorn app.main:app --reload

# æˆ–ä½¿ç”¨Alembicè¿ç§»å·¥å…·
alembic upgrade head
```

**é‡ç½®æ•°æ®åº“**:
```bash
# æ–¹å¼1: åˆ é™¤å¹¶é‡å»ºæ•°æ®åº“
psql -U postgres
DROP DATABASE personal_growth_os;
CREATE DATABASE personal_growth_os;
GRANT ALL PRIVILEGES ON DATABASE personal_growth_os TO pgos_user;
\q

# æ–¹å¼2: ä½¿ç”¨å·¥å…·è„šæœ¬æ¸…ç©ºæ•°æ®
cd backend
python utils/clear_all_data.py
```

**å·¥å…·è„šæœ¬** (backend/utils/):
- `clear_tasks.py` - æ¸…ç©ºæ‰€æœ‰ä»»åŠ¡
- `clear_all_data.py` - æ¸…ç©ºæ‰€æœ‰è¡¨æ•°æ®
- `check_pgvector.py` - æ£€æŸ¥pgvectoræ‰©å±•
- `tests/fixtures/create_test_data.py` - ç”Ÿæˆæµ‹è¯•æ•°æ®

**æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤**:
```bash
# å¤‡ä»½
pg_dump -U pgos_user personal_growth_os > backup.sql

# æ¢å¤
psql -U pgos_user personal_growth_os < backup.sql
```

---

## 9. å…³é”®æ–‡ä»¶ç´¢å¼•

### 9.1 åç«¯å…³é”®æ–‡ä»¶

```
backend/app/
â”œâ”€â”€ main.py                              # FastAPIå…¥å£
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config.py                        # é…ç½®ç®¡ç†(Settings)
â”‚   â””â”€â”€ llm_factory.py                   # LLMå·¥å‚
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ database.py                      # æ•°æ®åº“ä¼šè¯
â”‚   â””â”€â”€ models.py                        # SQLAlchemyæ¨¡å‹
â”œâ”€â”€ api/endpoints/
â”‚   â”œâ”€â”€ tasks.py                         # ä»»åŠ¡API
â”‚   â”œâ”€â”€ notes.py                         # ç¬”è®°API
â”‚   â”œâ”€â”€ chat.py                          # AIå¯¹è¯API
â”‚   â”œâ”€â”€ projects.py                      # é¡¹ç›®API
â”‚   â”œâ”€â”€ attachments.py                   # é™„ä»¶API
â”‚   â”œâ”€â”€ links.py                         # ç¬”è®°é“¾æ¥API
â”‚   â””â”€â”€ settings.py                      # é…ç½®API
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ task_igniter_agno.py            # Agno Agentå®ç°
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ vector_store.py                  # ChromaDBæœåŠ¡
â”‚   â”œâ”€â”€ file_storage.py                  # æ–‡ä»¶å­˜å‚¨
â”‚   â””â”€â”€ chunking.py                      # æ–‡æœ¬åˆ†å—
â””â”€â”€ crud/
    â”œâ”€â”€ crud_task.py                     # ä»»åŠ¡CRUD
    â”œâ”€â”€ crud_note.py                     # ç¬”è®°CRUD
    â””â”€â”€ crud_project.py                  # é¡¹ç›®CRUD
```

### 9.2 å‰ç«¯å…³é”®æ–‡ä»¶

```
frontend/src/
â”œâ”€â”€ App.vue                              # æ ¹ç»„ä»¶
â”œâ”€â”€ main.ts                              # å…¥å£æ–‡ä»¶
â”œâ”€â”€ router/index.ts                      # è·¯ç”±é…ç½®
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ MainLayout.vue                   # ä¸»å¸ƒå±€(Sidebar+ChatPanel)
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ DashboardView.vue                # å·¥ä½œå°
â”‚   â”œâ”€â”€ TasksView.vue                    # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ NotesView.vue                    # ç¬”è®°ç®¡ç†
â”‚   â”œâ”€â”€ ReviewView.vue                   # æ•°æ®å¤ç›˜
â”‚   â””â”€â”€ SettingsView.vue                 # ç³»ç»Ÿè®¾ç½®
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ tasks/                           # ä»»åŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ notes/                           # ç¬”è®°ç»„ä»¶
â”‚   â”œâ”€â”€ schedule/                        # æ—¥ç¨‹è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ chat/                            # AIå¯¹è¯ç»„ä»¶
â”‚   â””â”€â”€ layout/                          # å¸ƒå±€ç»„ä»¶
â””â”€â”€ stores/
    â”œâ”€â”€ taskStore.ts                     # ä»»åŠ¡çŠ¶æ€
    â”œâ”€â”€ noteStore.ts                     # ç¬”è®°çŠ¶æ€
    â”œâ”€â”€ projectStore.ts                  # é¡¹ç›®çŠ¶æ€
    â”œâ”€â”€ chatStore.ts                     # å¯¹è¯çŠ¶æ€
    â”œâ”€â”€ settingsStore.ts                 # é…ç½®çŠ¶æ€
    â””â”€â”€ uiStore.ts                       # UIçŠ¶æ€
```

---

## 10. æ€§èƒ½æŒ‡æ ‡

### 10.1 å“åº”æ—¶é—´

- APIå“åº”: < 200ms (CRUDæ“ä½œ)
- è¯­ä¹‰æœç´¢: < 500ms (10æ¡ç¬”è®°)
- AIä»»åŠ¡åˆ†è§£: 5-15ç§’ (ä¾èµ–LLMé€Ÿåº¦)
- é¡µé¢åŠ è½½: < 1ç§’ (åˆå§‹åŠ è½½)

### 10.2 æ•°æ®è§„æ¨¡

- ä»»åŠ¡æ•°é‡: æ”¯æŒ1000+ä»»åŠ¡æ— æ˜æ˜¾æ€§èƒ½ä¸‹é™
- ç¬”è®°æ•°é‡: æ”¯æŒ500+ç¬”è®°,è¯­ä¹‰æœç´¢ä¿æŒ< 1ç§’
- é¡¹ç›®æ•°é‡: æ¨è< 50ä¸ªé¡¹ç›®

---

## 11. å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

### 11.1 å½“å‰é™åˆ¶

- å•ç”¨æˆ·ç³»ç»Ÿ (æ— å¤šç”¨æˆ·æ”¯æŒ)
- æ— ç”¨æˆ·è®¤è¯ (æœ¬åœ°ä½¿ç”¨)
- ä¼šè¯æœªæŒä¹…åŒ– (åˆ·æ–°é¡µé¢ä¸¢å¤±Chatå†å²)
- æ— ç¦»çº¿æ”¯æŒ
- éœ€è¦æœ¬åœ°å®‰è£…PostgreSQLæœåŠ¡

### 11.2 å¾…ä¼˜åŒ–é¡¹

- ä»»åŠ¡åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ (å¤§æ•°æ®é‡ä¼˜åŒ–)
- ç¬”è®°ç¼–è¾‘è‡ªåŠ¨ä¿å­˜
- æ‰¹é‡æ“ä½œ (æ‰¹é‡åˆ é™¤/æ›´æ–°)
- å¯¼å‡ºåŠŸèƒ½ (Markdown/JSON)

---

## 12. ä¸‹ä¸€æ­¥è®¡åˆ’

### 12.1 çŸ­æœŸ (1ä¸ªæœˆ)

1. å®Œå–„Chatå†å²æŒä¹…åŒ–
2. ä¼˜åŒ–AIå“åº”é€Ÿåº¦
3. å¢åŠ æ‰¹é‡æ“ä½œåŠŸèƒ½
4. æ”¹è¿›é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### 12.2 ä¸­æœŸ (3ä¸ªæœˆ)

1. å®ç°æ•°æ®å¤ç›˜åŠŸèƒ½
2. å¢åŠ å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
3. ä¼˜åŒ–ç§»åŠ¨ç«¯é€‚é…
4. æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥

### 12.3 é•¿æœŸæ„¿æ™¯

å‚è§ `doc/AIè®¤çŸ¥åŠ©æ‰‹æ¶æ„è®¾è®¡.md` - å®Œæ•´çš„AIè®¤çŸ¥ä¼™ä¼´ç³»ç»Ÿ

---

## é™„å½•: ä¸è®¾è®¡æ–‡æ¡£çš„å¯¹æ¯”

| è®¾è®¡æ–‡æ¡£ | å®é™…å®ç° | å·®å¼‚è¯´æ˜ |
|---------|---------|---------|
| LangGraphæ¡†æ¶ | Agnoæ¡†æ¶ | å·²è¿ç§»,æ›´è½»é‡ |
| SQLite + ChromaDB | PostgreSQL + pgvector | ç»Ÿä¸€æ•°æ®åº“æ–¹æ¡ˆ,éƒ¨ç½²åˆ°äº‘ç«¯ |
| Redis Working Memory | PostgreSQL | MVPç®€åŒ–,æœªæ¥å¯å‡çº§ |
| MongoDBä¼šè¯å½’æ¡£ | æœªå®ç° | è®¡åˆ’ä¸­ |
| Mem0è®°å¿†ç³»ç»Ÿ | æœªé›†æˆ | è®¡åˆ’ä¸­ |
| åŒé€šé“æ¶æ„ | å•ä¸€Agent | ç®€åŒ–å®ç° |
| å­¦ä¹ é—­ç¯ | æœªå®ç° | é•¿æœŸè®¡åˆ’ |
| ä»»åŠ¡æ‹–æ‹½ç¼–è¾‘ | å¯¹è¯æ¡†ç¼–è¾‘ | è®¾è®¡å˜æ›´ |

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨æ¯æ¬¡é‡å¤§åŠŸèƒ½æ›´æ–°ååŒæ­¥æ›´æ–°æœ¬æ–‡æ¡£
**åé¦ˆ**: å¦‚å‘ç°æ–‡æ¡£ä¸å®é™…ä¸ç¬¦,è¯·åŠæ—¶åé¦ˆæ›´æ–°
